app:
  name: "Copilot Echo"
  log_level: "INFO"

voice:
  # Wake word detection: "stt" (keyword match) or "openwakeword" (recommended)
  wakeword_engine: "openwakeword"
  wake_word: "hey echo"
  audio_device: null          # integer device index, or null for default
  audio_device_name: null      # substring match against device name (alternative to index)
  sample_rate: 16000
  wake_listen_seconds: 2.5
  command_listen_seconds: 5.0

  # VAD-based recording
  utterance_end_seconds: 1.5   # silence after speech to end an utterance
  max_listen_seconds: 60.0     # hard cap on recording duration
  stt_energy_threshold: 0.01   # RMS level above which audio counts as speech

  # Conversation mode
  conversation_window_seconds: 5.0  # silence timeout before returning to wake word mode
  post_tts_cooldown_seconds: 1.0    # delay after TTS to avoid self-triggering

  # Openwakeword settings (only used when wakeword_engine is "openwakeword")
  wakeword_inference_framework: "onnx"  # "onnx" or "tflite"
  # Built-in models: "alexa", "hey mycroft", "hey jarvis", "hey rhasspy", etc.
  # Or a path to a custom model: ["models/hey_echo.onnx"]
  # To train a custom wake word, see https://github.com/lgpearson1771/openwakeword-trainer
  wakeword_models: ["models/hey_echo.onnx"]
  wakeword_threshold: 0.5
  wakeword_chunk_size: 1280
  wakeword_holdoff_seconds: 2.0
  wakeword_vad_threshold: 0.2         # 0 disables VAD filtering
  wakeword_speex_noise_suppression: false

  # Whisper STT model
  stt_model: "base"       # tiny, base, small, medium, large
  stt_device: "cpu"        # cpu or cuda
  stt_compute_type: "int8" # int8, float16, float32

  # TTS output settings
  # Run 'python -m copilot_echo.voice.list_voices' to see available voices.
  # tts_voice: null          # substring match against SAPI5 voice name (e.g. "David", "Zira")
  # tts_rate: 200            # words per minute (100–300)
  # tts_volume: 1.0          # 0.0–1.0

  # Auto-pause: pause the listener when a configured app is in an active call.
  # Detects both render (speaker) and capture (mic) audio sessions via WASAPI
  # so muting during a call does not cause a false resume.
  # auto_pause_on_call: false
  # auto_pause_apps: ["ms-teams.exe", "Teams.exe", "Zoom.exe"]
  # auto_pause_poll_seconds: 5.0

agent:
  # Personal knowledge file injected into the agent system prompt.
  # Create config/knowledge.md with persistent facts (org, project, repos, etc.).
  # This file is gitignored — each developer maintains their own.
  knowledge_file: null  # e.g. "config/knowledge.md"
  projects_dir: "config/projects"          # root directory for project files
  project_max_chars: 4000                   # max chars per active project before summarization

  # Autonomous "Get to Work" mode
  # Pre-configured routines triggered by voice phrases.
  # You can also say "get to work on {task}" for ad-hoc autonomous tasks.
  autonomous_max_steps: 10    # max agent round-trips per routine
  autonomous_max_minutes: 10  # hard time limit per routine
  autonomous_routines: []
  # Example routines:
  # autonomous_routines:
  #   - name: "Morning Standup"
  #     trigger_phrases: ["morning standup", "daily standup", "standup prep"]
  #     prompt: >
  #       Prepare my morning standup summary.  Check my active Azure DevOps
  #       work items, review any PRs I'm assigned to, and list what I worked
  #       on yesterday.  Summarize in a few bullet points suitable for a
  #       standup meeting.
  #     max_steps: 5
  #   - name: "PR Review"
  #     trigger_phrases: ["review my PRs", "check pull requests", "PR review"]
  #     prompt: >
  #       List all open pull requests assigned to me.  For each one, summarize
  #       the description, check the build status, and highlight any review
  #       comments that need my attention.

repo:
  default_path: null
  require_confirmation: true

tools:
  allowlist:
    - "mcp.azure_devops.work_items"
    - "fs.read"
    - "fs.write"
    - "git.status"
    - "git.diff"
